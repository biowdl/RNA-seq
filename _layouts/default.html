<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

{% seo %}
    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header style="height: 80%; overflow-y: scroll;">
        <h1><a href="{{ "/" | absolute_url }}">{{ site.title | default: site.github.repository_name }}</a></h1>

        {% if site.logo %}
          <img src="{{site.logo | relative_url}}" alt="Logo" />
        {% endif %}

        <p>{{ site.description | default: site.github.project_tagline }}</p>

        {% if site.github.is_project_page %}
          <p>Currently viewing version: <b>{{page.version}}</b></p>
          <p class="view"><a href="/">BioWDL home page</a>
          <p class="view"><a href="{{ site.github.repository_url }}">View the Project on GitHub <small>{{ site.github.repository_nwo }}</small></a></p>
        {% endif %}

        {% if site.github.is_user_page %}
          <p class="view"><a href="{{ site.github.owner_url }}">View GitHub Organisation</a></p>
        {% endif %}

        {% if site.show_downloads %}
          <ul class="downloads">
            <li><a href="{{ site.github.zip_url }}">Download <strong>ZIP File</strong></a></li>
            <li><a href="{{ site.github.tar_url }}">Download <strong>TAR Ball</strong></a></li>
            <li><a href="{{ site.github.repository_url }}">View On <strong>GitHub</strong></a></li>
          </ul>
        {% endif %}

        {% if site.github.is_user_page %}
          <details>
            <summary> Pages </summary>
            <ul class="content"> <!-- This class is needed for thinner displays. -->
              {% for innerPage in site.pages %}
                {% if innerPage.title %}
                  <li>
                    {% if page.title == innerPage.title %}
                      <b><a href="{{ innerPage.url }}">{{ innerPage.title }}</a></b>
                    {% else %}
                      <a href="{{ innerPage.url }}">{{ innerPage.title }}</a>
                    {% endif %}
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </details>
        {% endif %}

        {% if site.github.is_project_page %}
          <details>
            <summary> Latest </summary>
            <ul class="content"> <!-- This class is needed for thinner displays. -->
              {% for innerPage in site.pages %}
                {% if innerPage.title and innerPage.latest %}
                  <li>
                    {% if page.title == innerPage.title and page.version == innerPage.version %}
                      <b><a href="{{ site.github.project_title }}{{ innerPage.url }}">{{ innerPage.title }}</a></b>
                    {% else %}
                      <a href="{{ site.github.project_title }}{{ innerPage.url }}">{{ innerPage.title }}</a>
                    {% endif %}
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </details>

          <details>
            <summary> All versions </summary>
            <!-- gather versions -->
            {% assign versions = '' | split: '' %}
            {% for innerPage in site.pages %}
              {% unless versions contains innerPage.version %}
                {% assign version = innerPage.version | split: '@@@' %}
                {% assign versions = versions | concat: version %}
              {% endunless %}
            {% endfor %}

            <!-- make section per version -->
            {% for version in versions %}
              <details style="text-indent: 10px;">
                <summary> {{version}} </summary>
                <ul class="content"> <!-- This class is needed for thinner displays. -->
                  {% for innerPage in site.pages %}
                    {% if innerPage.title and innerPage.version == version %}
                      <li>
                        {% if page.title == innerPage.title and page.version == innerPage.version %}
                          <b><a href="{{ site.github.project_title }}{{ innerPage.url }}">{{ innerPage.title }}</a></b>
                        {% else %}
                          <a href="{{ site.github.project_title }}{{ innerPage.url }}">{{ innerPage.title }}</a>
                        {% endif %}
                      </li>
                    {% endif %}
                  {% endfor %}
                </ul>
              </details>
            {% endfor %}
          </details>
        {% endif %}

        <details>
          <summary> Page contents </summary>
          <!--https://github.com/allejo/jekyll-toc-->
          {% include toc.html html=content class="content" %}
        </details>

        <!-- split repos into catergories -->
        {% assign multisample = '' | split: '' %}
        {% assign singlesample = '' | split: '' %}
        {% assign multisampleExp = '' | split: '' %}
        {% assign singlesampleExp = '' | split: '' %}

        {% for repository in site.github.public_repositories %}
          {% assign category = repository.description | split: "Category:" | last %}
          {% assign repoName = repository.name | split: '@@@' %}
          {% if category == "Multi-Sample" %}
            {% assign multisample = multisample | concat: repoName %}
          {% endif %}
          {% if category == "Single-Sample" %}
            {% assign singlesample = singlesample | concat: repoName %}
          {% endif %}
          {% if category == "Multi-Sample Experimental" %}
            {% assign multisampleExp = multisampleExp | concat: repoName %}
          {% endif %}
          {% if category == "Single-Sample Experimental" %}
            {% assign singlesampleExp = singlesampleExp | concat: repoName %}
          {% endif %}
        {% endfor %}

        <details>
          <summary> Pipelines </summary>
          <details style="text-indent: 10px;">
            <summary> Production Ready ({{ multisample.size | plus: singlesample.size }})</summary>
            <details style="text-indent: 20px;">
              <summary> Multi-Sample ({{ multisample.size }})</summary>
              <ul class="content" style="text-indent: 30px;">
                {% for repoName in multisample %}
                  <li style="text-indent: 0px;"><a href="https://biowdl.github.io/{{ repoName }}">{{ repoName }}</a> (<a href="https://github.com/biowdl/{{ repoName }}">repo</a>)</li>
                {% endfor %}
              </ul>
            </details>
            <details style="text-indent: 20px;">
              <summary> Single-Sample ({{ singlesample.size }})</summary>
              <ul class="content" style="text-indent: 30px;">
                {% for repoName in singlesample %}
                  <li style="text-indent: 0px;"><a href="https://biowdl.github.io/{{ repoName }}">{{ repoName }}</a> (<a href="https://github.com/biowdl/{{ repoName }}">repo</a>)</li>
                {% endfor %}
              </ul>
            </details>
          </details>
          <details style="text-indent: 10px;">
            <summary>Experimental ({{ multisampleExp.size | plus: singlesampleExp.size }})</summary>
            <details style="text-indent: 20px;">
              <summary>Multi-Sample ({{ multisampleExp.size }})</summary>
              <ul class="content" style="text-indent: 30px;">
                {% for repoName in multisampleExp %}
                  <li style="text-indent: 0px;"><a href="https://biowdl.github.io/{{ repoName }}">{{ repoName }}</a> (<a href="https://github.com/biowdl/{{ repoName }}">repo</a>)</li>
                {% endfor %}
              </ul>
            </details>
            <details style="text-indent: 20px;">
              <summary>Single-Sample ({{ singlesampleExp.size }})</summary>
              <ul class="content" style="text-indent: 30px;">
                {% for repoName in singlesampleExp %}
                  <li style="text-indent: 0px;"><a href="https://biowdl.github.io/{{ repoName }}">{{ repoName }}</a> (<a href="https://github.com/biowdl/{{ repoName }}">repo</a>)</li>
                {% endfor %}
              </ul>
            </details>
          </details>
        </details>

      </header>
      <section>

      {% if site.github.is_project_page %}
        {% if site.github.releases.size == 0 %}
          <blockquote>
            <p>
              There are no releases available for this repository.
              The content is, therefore, likely still under development and
              not production ready. Use at own risk!
            </p>
          </blockquote>
        {% endif %}
        {% unless page.latest %}
          <blockquote>
            <p>
              Please be aware that the page you are currently viewing is not
              for the latest available version!
            </p>
          </blockquote>
        {% endunless %}
      {% endif %}

      {{ content }}

        <footer>
          <hr />
          <p><small>
              <i>Copyright 2018 Sequencing Analysis Support Core - Leiden University Medical Center</i><br />
              Hosted on GitHub Pages &mdash; Original theme by <a href="https://github.com/orderedlist">orderedlist</a>, modified for BioWDL.
          </small></p>
        </footer>

      </section>

    </div>
    <script src="{{ "/assets/js/scale.fix.js" | relative_url }}"></script>
    {% if site.google_analytics %}
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', '{{ site.google_analytics }}', 'auto');
      ga('send', 'pageview');
    </script>
    {% endif %}
  </body>
</html>
